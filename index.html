<!DOCTYPE html>
<html lang="tr">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Serbest Düşme Simülasyonu</title>
    <style>
        body {
            font-family: sans-serif;
            background-color: #f0f0f0;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            padding: 0;
            margin: 0;
            box-sizing: border-box;
        }

        .LEIFI_animation {
            width: 720px;
            height: 420px;
            max-width: 100%; 
            display: flex;
            flex-direction: row; 
            border: 1px solid #ccc;
            background-color: #FAFAFA;
            overflow: hidden;
            font-size: 13px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }

        .LEIFI_parameter {
            flex-basis: 280px; 
            flex-shrink: 0; 
            padding: 10px;
            display: flex;
            flex-direction: column;
            gap: 10px; 
            background: #FAFAFA;
            box-sizing: border-box;
            overflow-y: auto;
            min-width: 0; 
        }

        .LEIFI_leinwand {
            flex-grow: 1; 
            border-left: 1px solid #ccc;
            min-width: 0; 
            overflow: hidden; 
            display: flex; 
            justify-content: center; 
            align-items: center; 
            background-color: #FAFAFA; 
        }
        
        /* --- KONTROL PANELİ GRUPLARI --- */

        .panel-group {
            display: flex;
            flex-direction: column;
            gap: 8px; 
        }
        
        .group-buttons button {
            appearance: auto;
            background-color: buttonface;
            border-width: 2px;
            border-style: outset;
            border-color: buttonborder;
            color: buttontext;
            cursor: default;
            width: 100%;
            height: 30px;
            padding: 1px 6px;
            font-family: sans-serif;
            font-size: 13px;
            box-sizing: border-box;
        }

        .group-buttons button:active {
            border-style: inset;
        }

        .setting-item {
            display: flex;
            justify-content: space-between; 
            align-items: center;
            gap: 10px;
        }
        
         /* Ayar etiketleri */
        .setting-item > label:not([for^="WF09a_cb"]):not([for^="WF09a_rb"]) {
            font-weight: bold;
            flex-shrink: 0;
            white-space: normal;
            word-break: break-word;
        }
        
        /* Checkbox/Radio etiketleri */
         .setting-item label[for^="WF09a_cb"],
         .radio-item label[for^="WF09a_rb"] {
            font-weight: bold; 
            white-space: normal; 
         }


        .setting-item .input-group {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .setting-item .input-group input[type="text"] {
            width: 70px;
            text-align: right;
            border: 1px solid #ccc;
            padding: 4px;
            box-sizing: border-box;
        }
        
        .setting-item .input-group span {
            width: 35px; 
        }
        
        .checkbox-item {
            display: flex;
            align-items: center;
            gap: 5px;
            justify-content: flex-start;
        }
        
        .radio-item {
            display: flex;
            align-items: center;
            gap: 5px; 
        }
        
        /* --- CANVAS ALANI --- */
        
        #WF09a_cv {
            width: 440px; 
            height: 420px;
            display: block; 
            background-color: #FAFAFA;
        }
        
        /* --- MOBİL UYUMLULUK (Kullanıcı isteğine göre) --- */
        
        @media (max-width: 800px) { 
            .LEIFI_animation {
                flex-direction: column; 
                width: 100%;
                height: auto; 
                overflow: visible; /* Mobil kaydırma için eklendi */
            }
            
            .LEIFI_parameter {
                flex-basis: auto; 
                width: 100%; 
                overflow-y: visible; 
            }
            
            .LEIFI_leinwand {
                border-left: none; 
                border-top: 1px solid #ccc; 
                width: 100%;
                overflow-x: auto; /* Canvas sığmazsa kaydır */
                justify-content: flex-start;
                align-items: flex-start;
            }
            
            #WF09a_cv { 
                width: 440px; /* Sabit genişliği koru */
                height: 420px; /* Sabit yüksekliği koru */
            }
        }
        
        @media (min-width: 801px) {
            .LEIFI_animation {
                transform: scale(1.75);
                transform-origin: top center;
                margin-top: 20px; 
            }
        }

    </style>
</head>
<body class="LEIFI_body">
    
    <div class="LEIFI_animation">
        
        <div class="LEIFI_parameter">

            <div class="panel-group group-buttons">
                <button class="LEIFI_button" id="WF09a_bu2">Başla</button>
                <button class="LEIFI_button" id="WF09a_bu1">Geri</button>
            </div>

            <div class="panel-group group-settings">
                <div class="setting-item checkbox-item">
                    <input type="checkbox" class="LEIFI_checkbox" id="WF09a_cbSlow" name="cbSlow" value="">
                    <label class="LEIFI_label" for="WF09a_cbSlow">Ağır çekim</label>
                </div>

                <div class="setting-item">
                    <label for="WF09a_ipH">Başlangıç Yüksekliği:</label>
                    <div class="input-group">
                        <input type="text" class="LEIFI_text" id="WF09a_ipH">
                        <span>m</span>
                    </div>
                </div>
                <div class="setting-item">
                    <label for="WF09a_ipM">Kütle:</label>
                    <div class="input-group">
                        <input type="text" class="LEIFI_text" id="WF09a_ipM">
                        <span>kg</span>
                    </div>
                </div>
                <div class="setting-item">
                    <label for="WF09a_ipG">Yer çekimi ivmesi:</label>
                    <div class="input-group">
                        <input type="text" class="LEIFI_text" id="WF09a_ipG">
                        <span>m/s&sup2;</span>
                    </div>
                </div>
            </div>

            <div class="panel-group group-options">
                <div class="radio-item">
                    <input type="radio" class="LEIFI_radio" id="WF09a_rbY" name="bg" value="">
                    <label class="LEIFI_label" for="WF09a_rbY" style="color:#ff0000">Konum</label>
                </div>
                <div class="radio-item">
                    <input type="radio" class="LEIFI_radio" id="WF09a_rbV" name="bg" value="">
                    <label class="LEIFI_label" for="WF09a_rbV" style="color:#C3C800">Hız</label>
                </div>
                <div class="radio-item">
                    <input type="radio" class="LEIFI_radio" id="WF09a_rbA" name="bg" value="">
                    <label class="LEIFI_label" for="WF09a_rbA" style="color:#5A145A">İvme</label>
                </div>
                 <div class="radio-item" style="display: none;">
                    <input type="radio" class="LEIFI_radio" id="WF09a_rbF" name="bg" value="">
                    <label class="LEIFI_label" for="WF09a_rbF" style="color:#7FBCFF">Kuvvet</label>
                </div>
                <div class="radio-item">
                    <input type="radio" class="LEIFI_radio" id="WF09a_rbE" name="bg" value="">
                    <label class="LEIFI_label" for="WF09a_rbE" style="color:#000000">Enerji</label>
                </div>
            </div>
            
             <div style="flex-grow: 1;"></div>
        </div>

        <div class="LEIFI_leinwand">
            <canvas width="440" height="420" id="WF09a_cv">HTML5-Canvas desteklenmiyor!</canvas>
        </div>
        
        <script>
            // <![CDATA[
            // Serbest Düşme Sim
            // Author: cresas-emre
          
            document.addEventListener("DOMContentLoaded", Freier_Fall (), false); 

            function Freier_Fall () {
                
                var text01 = ["Başla", "Duraklat", "Devam", "Sıfırla"];
                var text02 = "m"; 
                var text03 = "Konum:";
                var text04 = "(yatay)";
                var text05 = "(dikey)";
                var text06 = "Menzil:";
                var text07 = "Maksimum Yükseklik:";
                var text08 = "Süre:";
                var text09 = "Hız:";
                var text10 = "Hız Büyüklüğü:";
                var text11 = "Açı:";
                var text12 = "İvme:";
                var text13 = "Kuvvet:";
                var text14 = "Kinetik Enerji:";
                var text15 = "Potansiyel Enerji:";
                var text16 = "Toplam Enerji:";

                var decimalSeparator = ",";
                var second = "s";
                var meter = "m";
                var meterPerSecond = "m/s";
                var meterPerSecond2 = "m/s\u00b2";
                var newton = "N";
                var joule = "J";
                var degree = "\u00b0";
                var symbolX = "x";
                var symbolY = "y";
                var symbolVelocity = "v";

                var colorGround = "#AAAAAA";
                var colorPosition = "#ff0000";
                var colorVelocity = "#C3C800";
                var colorAcceleration = "#5A145A";
                var colorForce = "#7FBCFF";
                var colorAngle = "#C3C800";
                colorClock1 = "#808080";
                colorClock2 = "#000000";
                colorClock3 = "#ff0000";

                var PI2 = 2*Math.PI;
                var DEG = Math.PI/180;
                var FONT1 = "normal normal bold 12px sans-serif";
                var FONT2 = "normal normal bold 16px monospace";
                var xU = 50, yU = 270; 

                var canvas, ctx; 
                var width, height; 
                var bu1, bu2; 
                var cbSlow; 
                var ipH, ipV, ipW, ipM, ipG; 
                var rbY, rbV, rbA, rbF, rbE; 
                var on; 
                var slow; 
                var t0; 
                var t; 
                var timer; 
                var g; 
                var h0; 
                var v0, v0x, v0y; 
                var alpha0; 
                var m; 
                var x, y; 
                var x0, y0; 
                var pix; 
                var tW; 
                var w; 
                var hMax; 
                var vyMax; 
                var e; 
                var nrSize; 
                var pos1, pos2;   

                start ();

                function start () {
                  canvas = document.getElementById("WF09a_cv");
                  width = canvas.width; height = canvas.height;
                  ctx = canvas.getContext("2d");
                  bu1 = document.getElementById("WF09a_bu1");
                  bu2 = document.getElementById("WF09a_bu2");
                  bu2.state = 0;
                  cbSlow = document.getElementById("WF09a_cbSlow");
                  cbSlow.checked = false;
                  ipH = document.getElementById("WF09a_ipH");
                  ipM = document.getElementById("WF09a_ipM");
                  ipG = document.getElementById("WF09a_ipG");
                  rbY = document.getElementById("WF09a_rbY");
                  rbV = document.getElementById("WF09a_rbV");
                  rbA = document.getElementById("WF09a_rbA");
                  rbF = document.getElementById("WF09a_rbF");
                  rbE = document.getElementById("WF09a_rbE"); 
                  rbY.checked = true; nrSize = 1;
                  on = slow = false;
                  h0 = 5; v0 = 0; alpha0 = 90*DEG; m = 1; g = 9.81;
                  updateInput();
                  enableInput(true);
                  t = 0;
                  calculation();
                  calcPos12();
                  paint(); 
                  bu1.onclick = reactionReset;
                  bu2.onclick = reactionStart;
                  cbSlow.onclick = reactionSlow;
                  
                  ipH.onkeydown = reactionEnter;
                  ipH.onchange = reactionChange; 
                  ipM.onkeydown = reactionEnter;
                  ipM.onchange = reactionChange; 
                  ipG.onkeydown = reactionEnter;
                  ipG.onchange = reactionChange; 
                  
                  rbY.onclick = reactionRadioButton;
                  rbV.onclick = reactionRadioButton;
                  rbA.onclick = reactionRadioButton;
                  rbF.onclick = reactionRadioButton;
                  rbE.onclick = reactionRadioButton;
                }
                  
                function setButton2State (st) { bu2.state = st; bu2.innerHTML = text01[st]; }
                function switchButton2 () { var st = bu2.state; if (st == 0) st = 1; else st = 3-st; setButton2State(st); }
                function enableInput (p) { ipH.readOnly = !p; ipM.readOnly = !p; ipG.readOnly = !p; }
                   
                function reactionReset () {
                  setButton2State(0);
                  enableInput(true);
                  stopAnimation();
                  t = 0;
                  // Reset all values to defaults
                  h0 = 5;
                  v0 = 0;
                  alpha0 = 90*DEG;
                  m = 1;
                  g = 9.81;
                  updateInput();
                  reaction();
                  paint();
                }
                  
                function reactionStart () {
                  if (bu2.state == 3) {
                      reactionReset();
                      return;
                  }
                  
                  switchButton2();
                  enableInput(false);
                  if (bu2.state == 1) startAnimation();
                  else stopAnimation();
                  reaction();
                  paint(); 
                }
                  
                function reactionSlow () { slow = cbSlow.checked; }
                function reaction () { input(); calculation(); }
                function reactionEnter (e) { if (e.key && String(e.key) == "Enter" || e.keyCode == 13) { reaction(); paint(); } }
                
                function reactionChange () {
                    reaction();
                    paint();
                }
                
                function reactionRadioButton () { if (rbY.checked) nrSize = 1; else if (rbV.checked) nrSize = 2; else if (rbA.checked) nrSize = 3; else if (rbF.checked) nrSize = 4; else nrSize = 5; if (!on) paint(); }
                  
                function startAnimation () { on = true; timer = setInterval(paint,40); t0 = new Date(); }
                function stopAnimation () { on = false; clearInterval(timer); }

                function calcPos12 () { ctx.font = FONT1; pos1 = ctx.measureText(text06).width; pos1 = Math.max(pos1,ctx.measureText(text07).width); pos1 = Math.max(pos1,ctx.measureText(text08).width); pos1 += 260; pos2 = ctx.measureText(text14).width; pos2 = Math.max(pos2,ctx.measureText(text15).width); pos2 = Math.max(pos2,ctx.measureText(text16).width); pos2 += 260; }
                function getFactor (maxReal, maxPixel) { var q = maxPixel/maxReal; var f = maxPixel; while (true) { f /= 2; if (f < q) break; f /= 2.5; if (f < q) break; f /= 2; if (f < q) break; } return f; }
                function getStep1 () { var limit = 5, step1 = 1; while (true) { if (pix >= limit) return step1; limit /= 10; step1 *= 10; } }
                function getStep2 () { var limit = 50, step1 = 1; while (true) { if (pix >= limit) return step1; limit /= 2; step1 *= 2; if (pix >= limit) return step1; limit /= 2.5; step1 = 5*step1/2; if (pix >= limit) return step1; limit /= 2; step1 *= 2; } }
                
                function calculation () {
                  v0x = v0*Math.cos(alpha0);
                  v0y = v0*Math.sin(alpha0);
                  if (Math.cos(alpha0) < 1e-10) v0x = 0;
                  tW = (v0y+Math.sqrt(v0y*v0y+2*g*h0))/g;
                  w = v0x*tW;
                  if (v0y > 0) { var t_hmax = v0y/g; hMax = h0+v0y*t_hmax-g*t_hmax*t_hmax/2; }
                  else hMax = h0;
                  vyMax = Math.abs(v0y-g*tW);
                  e = m*v0*v0/2+m*g*h0;
                  pix = getFactor(Math.max(w,hMax),300);
                  if (pix*hMax > 220) pix /= 2;
                }
                  
                function ToString (n, d, fix) { var s = (fix ? n.toFixed(d) : n.toPrecision(d)); return s.replace(".",decimalSeparator); }
                
                function inputNumber (ef, d, fix, min, max) { 
                    var s = ef.value; 
                    // DÜZELTME: Binlik ayıracı (nokta) kaldır, ondalık ayıracı (virgül) noktaya çevir
                    s = s.replace(/\./g, '');  // 1.000,50 -> 1000,50
                    s = s.replace(",", ".");  // 1000,50 -> 1000.50
                    
                    var n = Number(s); 
                    if (isNaN(n)) n = 0; 
                    if (n < min) n = min; 
                    if (n > max) n = max; 
                    ef.value = ToString(n,d,fix); 
                    return n; 
                }
                
                function input () { 
                    // DÜZELTME: Maksimum yükseklik 100 -> 10000
                    h0 = inputNumber(ipH,3,true,0,10000); 
                    v0 = 0; alpha0 = 90*DEG; 
                    m = inputNumber(ipM,3,true,0.1,10); 
                    g = inputNumber(ipG,3,true,1,100); 
                }
                function updateInput () { ipH.value = ToString(h0,3,true); ipM.value = ToString(m,3,true); ipG.value = ToString(g,3,true); }
                   
                function newPath () { ctx.beginPath(); ctx.strokeStyle = "#000000"; ctx.lineWidth = 1; }
                function line (x1, y1, x2, y2, c, w) { newPath(); if (c) ctx.strokeStyle = c; if (w) ctx.lineWidth = w; ctx.moveTo(x1,y1); ctx.lineTo(x2,y2); ctx.stroke(); }
                function rectangle (x, y, w, h, c) { if (c) ctx.fillStyle = c; newPath(); ctx.fillRect(x,y,w,h); ctx.strokeRect(x,y,w,h); }
                function circle (x, y, r, c) { if (c) ctx.fillStyle = c; newPath(); ctx.arc(x,y,r,0,PI2,true); if (c) ctx.fill(); ctx.stroke(); }
                function arrow (x1, y1, x2, y2, w) { if (!w) w = 1; var dx = x2-x1, dy = y2-y1; var length = Math.sqrt(dx*dx+dy*dy); if (length == 0) return; dx /= length; dy /= length; var s = 2.5*w+7.5; var xSp = x2-s*dx, ySp = y2-s*dy; var h = 0.5*w+3.5; var xSp1 = xSp-h*dy, ySp1 = ySp+h*dx; var xSp2 = xSp+h*dy, ySp2 = ySp-h*dx; xSp = x2-0.6*s*dx; ySp = y2-0.6*s*dy; ctx.beginPath(); ctx.lineWidth = w; ctx.moveTo(x1,y1); if (length < 5) ctx.lineTo(x2,y2); else ctx.lineTo(xSp,ySp); ctx.stroke(); if (length < 5) return; ctx.beginPath(); ctx.fillStyle = ctx.strokeStyle; ctx.moveTo(xSp,ySp); ctx.lineTo(xSp1,ySp1); ctx.lineTo(x2,y2); ctx.lineTo(xSp2,ySp2); ctx.closePath(); ctx.fill(); }
                
                function clock () {
                  var x = 140, y = 30;
                  rectangle(x-60,y-15,120,30,colorClock1);
                  rectangle(x-50,y-10,100,20,colorClock2);
                  ctx.font = FONT2;
                  ctx.fillStyle = colorClock3;
                  var s = ToString(t,3,true) + " "+second;
                  ctx.textAlign = "center";
                  ctx.fillText(s,x,y+5);
                  ctx.font = FONT1;
                }    
                  
                function ball () {
                  x = v0x*t; y = h0+v0y*t-g*t*t/2;
                  if (y < 0) y = 0;
                  x0 = xU+pix*x; y0 = yU-pix*y;
                  circle(x0,y0,3.5,"#000000");
                }
                  
                function axes () {
                  newPath();
                  arrow(xU,yU+10,xU,yU-255);
                  var step1 = getStep1();
                  var step2 = getStep2();
                  ctx.fillStyle = "#000000";
                  ctx.textAlign = "right";
                  for (var i=1; i<=220/pix; i++) {
                    var y = yU-i*pix;
                    var d = (i%step2==0 ? 5 : 2);
                    if (i%step1 == 0) line(xU-d,y,xU+d,y);
                    if (i%step2 == 0) ctx.fillText(""+i,xU-7,y+4);
                  }
                  ctx.textAlign = "center";
                  ctx.fillText(symbolY,xU-20,yU-245);
                  ctx.fillText(text02,xU-20,yU-230); 
                }
                      
                function orbit () {
                  newPath();
                  ctx.strokeStyle = colorPosition;
                  if (v0x < 1e-10) { line(xU,yU,xU,yU-hMax*pix); return; }
                  var gH = g/2;
                  var xx = xU, yy = yU-h0*pix;
                  ctx.moveTo(xx,yy);
                  var t_orbit = 0;
                  while (t_orbit < tW) {
                    xx++;
                    var x_orbit = (xx-xU)/pix;
                    t_orbit = x_orbit/v0x;
                    var y_orbit = h0+t_orbit*(v0y-gH*t_orbit);
                    yy = yU-y_orbit*pix;
                    ctx.lineTo(xx,yy);
                  }
                  ctx.stroke();
                }
                  
                function writeValue (beg, val, end, x, y) {
                  // DÜZELTME: toPrecision(3) -> toFixed(2)
                  var s = beg+ToString(val,2,true)+end;
                  ctx.fillText(s,x,y);
                }
                  
                function position () {
                  newPath();
                  ctx.fillStyle = colorPosition;
                  var x1 = 220, x2 = 240, x3 = 320;
                  ctx.fillText(text03,x1,25); 
                  writeValue(symbolY+" = ",y," "+meter,x2,55);
                  // Süre göstergesi kaldırıldı
                  // ctx.fillText(text08,x1,120); 
                  // writeValue("",tW," "+second,pos1-20,120); 
                  line(xU-5,y0,xU+5,y0,colorPosition);
                }
                      
                function angle (x, y, a) { var r = 20; newPath(); ctx.fillStyle = colorAngle; ctx.moveTo(x,y); ctx.lineTo(x+r,y); ctx.arc(x,y,r,0,-a,a>0); ctx.closePath(); ctx.fill(); ctx.stroke(); }
                    
                function velocity () {
                  var vy = v0y-g*t;
                  var alpha = Math.atan(vy/v0x);
                  ctx.fillStyle = colorAngle;
                  orbit();
                  var l = vyMax*10;
                  var f = (l>120 ? l/120 : 1);
                  var dxPix = v0x*10/f;
                  var dyPix = vy*10/f; 
                  ctx.strokeStyle = colorVelocity;
                  arrow(x0,y0,x0+dxPix,y0-dyPix,3);
                  ctx.fillText(text09,220,25); 
                  var w1 = ctx.measureText(symbolVelocity).width;
                  var w2 = 2*w1+ctx.measureText("  ").width;
                  var mps = " "+meterPerSecond;
                  ctx.fillText(symbolVelocity,240,55);
                  ctx.fillText(symbolY,240+w1,60);
                  writeValue("= ",vy,mps,240+w2,55);
                  ctx.strokeStyle = "#000000";
                }
                  
                function acceleration () {
                  var len = (g<30 ? g*4 : 120);
                  ctx.strokeStyle = colorAcceleration;
                  arrow(x0,y0,x0,y0+len,3);
                  ctx.fillText(text12,220,25); 
                  writeValue("",-g,meterPerSecond2,330,25);
                }
                  
                function force () {
                  var len = (g<30/m ? g*4*m : 120);
                  ctx.strokeStyle = colorForce;
                  arrow(x0,y0,x0,y0+len,3);
                  ctx.fillText(text13,220,25); 
                  writeValue("",-m*g," "+newton,330,25);
                }
                    
                function energy () {
                  var ePot = m*g*y;
                  var j = " "+joule;
                  ctx.fillStyle = colorVelocity;
                  ctx.fillText(text14,220,25); 
                  writeValue("",e-ePot,j,pos2-20,25); 
                  ctx.fillStyle = colorPosition;
                  ctx.fillText(text15,220,40); 
                  writeValue("",ePot,j,pos2-20,40); 
                  ctx.fillStyle = "#000000";
                  ctx.fillText(text16,220,65); 
                  writeValue("",e,j,pos2-20,65); 
                }
                  
                function paint () {
                    ctx.clearRect(0,0,width,height);
                  if (on) {
                    var t1 = new Date();
                    var dt = (t1 - (t0 || t1)) / 1000; 
                    if (dt > 0.1) dt = 0.04; 
                    if (slow) dt /= 10;
                    t += dt;
                    t0 = t1;
                    if (t > tW) {
                        t = tW;
                        stopAnimation(); 
                        setButton2State(3); // "Sıfırla" durumuna geç
                    }
                  }
                  ctx.font = FONT1;
                  var vv = yU+3;
                  rectangle(0,vv,width,height-vv,colorGround);
                  ball();
                  axes();
                  clock(); // Kırmızı süre kutusu geri eklendi
                  if (nrSize != 2) orbit();
                  ctx.textAlign = "left";
                  switch (nrSize) {
                    case 1: position(); break;
                    case 2: velocity(); break;
                    case 3: acceleration(); break;
                    case 4: force(); break;
                    case 5: energy(); break;
                  }
                }
            }
            // ]]>
        </script>
    </div>
</body>
</html>